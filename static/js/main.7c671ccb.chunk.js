(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{110:function(e,t,n){e.exports=n(176)},115:function(e,t,n){},152:function(e,t){},176:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),i=(n(115),n(35)),u=n.n(i),s=n(22),l=n(28),m=n(30),f=n.n(m),d=n(198),p=n(10),b=n(66),h=n(56),g=n.n(h);function _(e,t){return Object(b.a)(Object(b.a)({},e),t)}function E(e,t){return{type:e,payload:t}}var v=function(){var e=g()();return g()(e).unix()},O=function(e){return E("SIGN_IN_USERNAME_SUCCESS",e)},S=function(e){return E("GET_USER_LOCAL_STORAGE_SUCCESS",e)},j=n(91),x=function(e){return e.authReducer.user},w=function(e){return e.authReducer.loading},C=function(e){return e.authReducer.error},N=Object(j.a)(x,(function(e){return null!==e})),A=n(20);function y(){var e=Object(l.a)(["\nbackground-color: ",";\ncolor: ",";\nheight: 100%;\nwidth: auto;\nfont-size: 18px;\npadding: 0;\nheight: 100%;\nwidth: 160px;\nborder: 0;\nfont-weight: 700;\noutline: 0;\nborder-radius: 5em;\nbox-sizing: border-box;\ncursor: pointer;"]);return y=function(){return e},e}function R(){var e=Object(l.a)(["\nfont-weight: 700;\nfont-size: 18px;\nborder: 0;\noutline: 0;\nborder-radius: 5em;\nbox-sizing: border-box;\nheight: 100%;\nwidth: 100%;\npadding: 0 0.714em;\nbackground-color: ",";\ncolor: ",";"]);return R=function(){return e},e}function I(){var e=Object(l.a)(["\nborder-radius: 6.25em;\nbackground-color: ",";\nwidth: 200px;\nheight: 65px;\noutline: 0;\nborder: none;\ncursor: pointer;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nfont-size: 20px;\n"]);return I=function(){return e},e}function L(){var e=Object(l.a)(["\n&.WithInput {\n    width: 400px;\n    transition: 300ms;\n}\nwidth: 200px;\nheight: 65px;\nposition: relative;\nfont-weight: 700;\nbox-sizing: border-box;\nbox-shadow: 0 0.125em 0.3125em rgba(0, 0, 0, 0.3);\ndisplay: flex;\njustify-content: center;\nborder-radius: 6.25em;\nbackground-color: ",";\ntransition: 300ms;\n"]);return L=function(){return e},e}function U(){var e=Object(l.a)(["\npadding: 0.625em;\nbox-sizing: border-box;\nbox-shadow: 0 0.125em 0.3125em rgba(0, 0, 0, 0.3);\ndisplay: flex;\njustify-content: center;\nwidth: 100%;\nborder-radius: 6.25em;\nbackground-color: ",";"]);return U=function(){return e},e}var k=A.c.form(U(),(function(e){return e.theme.loginLabel})),M=A.c.div.attrs((function(e){return{className:e.className}}))(L(),(function(e){return e.theme.loginLabel})),T=A.c.label(I(),(function(e){return e.theme.loginLabel})),G=A.c.input(R(),(function(e){return e.theme.formInput}),(function(e){return e.theme.text})),F=A.c.button(y(),(function(e){return e.theme.formButton.background}),(function(e){return e.theme.formButton.color})),z=function(){var e=Object(r.useState)(!0),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(s.a)(c,2),u=i[0],l=i[1],m=Object(p.c)(w),b=Object(p.b)(),h=function(e){return b(function(e){return E("SIGN_IN_USERNAME",e)}(e))},g=[];n||g.push("WithInput");return a.a.createElement("div",{className:f.a.Login},a.a.createElement(M,{className:g.join(" ")},n&&a.a.createElement(T,{onClick:function(){return!m&&o(!1)}},m?"Connecting...":"Start Chatting!"),a.a.createElement(d.a,{in:!n,timeout:300,unmountOnExit:!0,classNames:{appear:f.a.AppearActive,appearDone:f.a.Appeared,enterActive:f.a.InputEntering,enterDone:f.a.InputEntered,exitActive:f.a.InputClosing}},a.a.createElement(k,{onSubmit:function(e){return function(e){e.preventDefault(),o(!0),h({username:u})}(e)}},a.a.createElement(G,{onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Username"}),a.a.createElement(F,{disabled:""===u,type:"submit"},"Let's Go!")))))},B=n(195),D=n(29),W=n.n(D),H=n(99),J=n.n(H),K=n(98),P=n.n(K),X=n(97),Y=n.n(X),V=n(54),$=n(95),q=n.n($),Q="https://api-chat-server.herokuapp.com/",Z=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(p.c)(x),c=Object(r.useRef)();Object(r.useEffect)((function(){return c.current=q()(Q),c.current.on("newChatMessage",(function(e){a((function(t){return[].concat(Object(V.a)(t),[e])}))})),c.current.on("initMessages",(function(e){a(e.reverse())})),i(),function(){var e;null===(e=c.current)||void 0===e||e.disconnect()}}),[]);var i=function(){var e;null===(e=c.current)||void 0===e||e.emit("initMessages")};return{messages:n,sendMessage:function(e){var t;null===(t=c.current)||void 0===t||t.emit("newChatMessage",{user:o,body:e,createdAt:v()})},user:o}},ee=n(31),te=n.n(ee),ne=function(e){var t=e.message,n=e.userId,r=n===t.user._id?te.a.Sent:te.a.Received,o=function(e){var t=new Date(1e3*e);return g()(t).fromNow()}(t.createdAt);return a.a.createElement("div",{className:"".concat(te.a.Message," ").concat(r)},n!==t.user._id&&a.a.createElement("p",{className:te.a.Username},t.user.username),a.a.createElement("p",null,t.body),a.a.createElement("p",{className:te.a.Timestamp},o))},re=a.a.memo((function(e){var t=e.messages,n=e.userId,r=t.map((function(e,t){return a.a.createElement(ne,{key:"".concat(e._id).concat(t),message:e,userId:n})}));return a.a.createElement("div",{className:te.a.List},r)})),ae=n(96),oe=function(e){var t=e.theme,n=e.toggleTheme,o=Z(),c=o.messages,i=o.sendMessage,u=o.user,l=Object(r.useRef)(null),m=Object(r.useState)(""),f=Object(s.a)(m,2),d=f[0],b=f[1],h=Object(p.b)();Object(r.useEffect)((function(){var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[c]);var g=function(e){e.preventDefault(),b(""),i(d)};return a.a.createElement("div",{className:W.a.ChatRoom},a.a.createElement("header",{className:W.a.Header},a.a.createElement("button",{onClick:function(){return h(E("LOGOUT_USER"))}},"LOGOUT"),"light"===t?a.a.createElement(Y.a,{onClick:n}):a.a.createElement(P.a,{onClick:n})),a.a.createElement("section",{className:W.a.Section},a.a.createElement("main",{className:W.a.Main},a.a.createElement(re,{messages:c,userId:(null===u||void 0===u?void 0:u._id)&&u._id}),a.a.createElement("div",{ref:l})),a.a.createElement("form",{className:W.a.Form,onSubmit:g},a.a.createElement("textarea",{placeholder:"Start typing here...",value:d,onKeyPress:function(e){return function(e){ae.isMobile||"Enter"!==e.key||e.shiftKey||g(e)}(e)},onChange:function(e){return b(e.target.value)},className:W.a.Textarea}),""!==d&&a.a.createElement("button",{className:W.a.Button,type:"submit"},a.a.createElement(J.a,{fontSize:"large",style:{color:"#6649b8"}})))))},ce={loginLabel:"#1c1f25",formButton:{color:"#1c1f25",background:"white"},formInput:"#1c1f25",body:"#E2E2E2",text:"white"},ie={loginLabel:"white",formButton:{color:"white",background:"#282c34"},formInput:"white",body:"#1c1f25",text:"#1c1f25"};function ue(){var e=Object(l.a)(["\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n\n  body {\n    font-size: 10px;\n    background-color: ",";\n    color: ",';\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    font-family: "Open Sans", sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }']);return ue=function(){return e},e}var se=Object(A.b)(ue(),(function(e){return e.theme.body}),(function(e){return e.theme.text})),le=n(196),me=n(197),fe=n(100),de=n.n(fe),pe=function(e){var t=e.open,n=e.error,r=Object(p.b)(),o=function(){return r(E("CLOSE_SNACKBAR"))},c=function(e,t){"clickaway"!==t&&o()};return a.a.createElement(le.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:6e3,onClose:c,message:n,action:a.a.createElement(a.a.Fragment,null,a.a.createElement(me.a,{size:"small","aria-label":"close",color:"inherit",onClick:c},a.a.createElement(de.a,{fontSize:"small"})))})},be=function(){var e=function(){var e=Object(r.useState)("light"),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),c=Object(s.a)(o,2),i=c[0],u=c[1],l=function(e){window.localStorage.setItem("theme",e),a(e)};return Object(r.useEffect)((function(){var e=window.localStorage.getItem("theme");e?a(e):l("light"),u(!0)}),[]),{theme:n,toggleTheme:function(){l("light"===n?"dark":"light")},componentMounted:i}}(),t=e.theme,n=e.toggleTheme,o=e.componentMounted,c="light"===t?ce:ie,i=Object(p.c)(N),l=Object(p.c)(C),m=Object(p.b)(),f=Object(r.useCallback)((function(){return m(E("GET_USER_LOCAL_STORAGE"))}),[m]);return Object(r.useEffect)((function(){f()}),[f]),o?a.a.createElement(A.a,{theme:c},a.a.createElement(se,null),a.a.createElement("div",{className:u.a.App},a.a.createElement(B.a,{mode:"out-in"},a.a.createElement(d.a,{key:i?"ChatRoom":"Login",addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:{enter:u.a.FadeEnter,enterActive:u.a.FadeEnterActive,exit:u.a.FadeExit,exitActive:u.a.FadeExitActive}},i?a.a.createElement(oe,{toggleTheme:n,theme:t}):a.a.createElement(z,null)))),a.a.createElement(pe,{open:""!==l,error:l})):a.a.createElement("div",null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(21),ge={user:null,loading:!1,error:""},_e=function(e){return _(e,{loading:!0})},Ee=function(e,t){return _(e,{user:t,loading:!1,error:""})},ve=function(e,t){return _(e,{loading:!1,error:t})},Oe=function(e){return _(e,{user:null})},Se=function(e,t){return _(e,{user:t})},je=function(e){return _(e,{error:""})},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN_USERNAME_START":return _e(e);case"SIGN_IN_USERNAME_SUCCESS":return Ee(e,t.payload);case"SIGN_IN_USERNAME_FAILED":return ve(e,t.payload);case"LOGOUT_USER_SUCCESS":return Oe(e);case"GET_USER_LOCAL_STORAGE_SUCCESS":return Se(e,t.payload);case"CLOSE_SNACKBAR":return je(e);default:return e}},we=Object(he.c)({authReducer:xe}),Ce=n(104),Ne=n(17),Ae=n.n(Ne),ye=n(9),Re=n(101),Ie=n(51),Le=n(52),Ue=n(105),ke=n(103),Me=n(102),Te=n.n(Me),Ge=new(function(e){Object(Ue.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(Ie.a)(this,n),t.apply(this,arguments)}return Object(Le.a)(n,[{key:"signinNewUser",value:function(){var e=Object(Re.a)(Ae.a.mark((function e(t){var n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/user/signin",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(){Object(Ie.a)(this,e),this.api=void 0,this.apiConfig={timeout:15e3,baseURL:Q,headers:{common:{"Content-Type":"application/json",Accept:"application/json"}}},this.api=Te.a.create(this.apiConfig),this.api.interceptors.response.use((function(e){return e}),(function(e){var t;return Promise.reject(null===(t=e.response)||void 0===t?void 0:t.data.message)}))}return Object(Le.a)(e,[{key:"get",value:function(e,t){return this.api.get(e,t)}},{key:"post",value:function(e,t,n){return this.api.post(e,t,n)}},{key:"delete",value:function(e,t){return this.api.delete(e,t)}},{key:"put",value:function(e,t,n){return this.api.put(e,t,n)}}]),e}())),Fe=Ae.a.mark(De),ze=Ae.a.mark(We),Be=Ae.a.mark(He);function De(e){var t;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ye.d)(E("SIGN_IN_USERNAME_START"));case 2:return n.next=4,Object(ye.c)(500);case 4:return n.prev=4,n.next=7,Object(ye.b)((function(){return Ge.signinNewUser(e.payload)}));case 7:return t=n.sent,n.next=10,Object(ye.b)([localStorage,"setItem"],"currentUser",JSON.stringify(t));case 10:return n.next=12,Object(ye.d)(O(t));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(4),n.next=18,Object(ye.d)(E("SIGN_IN_USERNAME_FAILED",n.t0));case 18:case"end":return n.stop()}}),Fe,null,[[4,14]])}function We(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.b)([localStorage,"removeItem"],"currentUser");case 2:return e.next=4,Object(ye.c)(300);case 4:return e.next=6,Object(ye.d)(E("LOGOUT_USER_SUCCESS"));case 6:case"end":return e.stop()}}),ze)}function He(){var e;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ye.b)([localStorage,"getItem"],"currentUser");case 2:return e=t.sent,t.next=5,Object(ye.d)(S(JSON.parse(e)));case 5:case"end":return t.stop()}}),Be)}var Je=[Object(ye.e)("SIGN_IN_USERNAME",De),Object(ye.e)("LOGOUT_USER",We),Object(ye.e)("GET_USER_LOCAL_STORAGE",He)],Ke=Ae.a.mark(Pe);function Pe(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.a)(Object(V.a)(Je));case 2:case"end":return e.stop()}}),Ke)}var Xe=he.d,Ye=Object(Ce.a)(),Ve=Object(he.e)(we,Xe(Object(he.a)(Ye)));Ye.run(Pe),c.a.render(a.a.createElement(p.a,{store:Ve},a.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,n){e.exports={ChatRoom:"ChatRoom_ChatRoom__1wWXC",Header:"ChatRoom_Header__1nsHl",Section:"ChatRoom_Section__3G7Gw",Main:"ChatRoom_Main__3yd-j",Form:"ChatRoom_Form__S9-hN",Textarea:"ChatRoom_Textarea__B0n_x",Button:"ChatRoom_Button__3toSy"}},30:function(e,t,n){e.exports={Login:"Login_Login__DI4NL",InputEntering:"Login_InputEntering__SAtwt",InputEntered:"Login_InputEntered__Wpmau",InputClosing:"Login_InputClosing__XBbjd"}},31:function(e,t,n){e.exports={List:"MessagesList_List__FWKb1",Message:"MessagesList_Message__1EvY3",Sent:"MessagesList_Sent__UWx0E",Received:"MessagesList_Received__23zvc",Username:"MessagesList_Username__2MU3T",Timestamp:"MessagesList_Timestamp__3dzyR"}},35:function(e,t,n){e.exports={App:"App_App__34i3s",FadeEnter:"App_FadeEnter__1uJf1",FadeExit:"App_FadeExit__25tik",FadeEnterActive:"App_FadeEnterActive__1Ptu1",FadeExitActive:"App_FadeExitActive__2WYg3"}}},[[110,1,2]]]);
//# sourceMappingURL=main.7c671ccb.chunk.js.map